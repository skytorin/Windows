# Восстановление загрузчика Windows

Загражаемся с загрузочной флешки и нажимаем:
```bash
Shift+F10 
или 
Shift+Fn+F10
```

Запускаем утилиту для управления дисками, томами и разделами:
```bash
diskpart
```

Вывод списка томов, тома пронумерованы. 
```bash
list volume
```

Выаод всех дисков в системе:
```bash
list disk
```

Обращаем внимание на тома загрузочного и системного разделов:
```bash
UEFI и GPT - загрузочный раздел обычно скрытый, с файловой системой FAT32 и размером 99-300 Мб. 
BIOS и MBR - загрузочный раздел обычно размером 500 Мб. с файловой системой NTFS. 
````

Выбираем нужный том, указывая его номер:
```bash
select volume N
```

При необходимости форматируем выбранный том в FAT32:
```bash
format fs=FAT32
```

Назначаем тому букву Z:
```bash
assisgn letter=Z
```

Дополнительные команды утилиты diskpart:
```bash
select disk N     # выбор диска по его номеру.
list partition    # Вывод списка томов и разделов в системе.
delete volume     # При необходимости можно удалить выбранный том.
remove letter=Z   # Удаляем букву, чтобы том не отображался в системе.
exit              # Выходим из утилиты diskpart.
```

Восстанавливаем загрузчик
```bash
bcdboot C:\Windows /s Z: /f ALL
 где 
 C:\Windows – путь к корневому системному каталогу Windows на диске;
 /f ALL – скопировать файлы среды загрузки Windows, включая файлы для компьютеров с UEFI и BIOS (теоретическая возможность загружаться на EFI и BIOS системах). Чтобы скопировать только EFI загрузчик, используйте команду /f UEFI;
 /s Z: — скопировать файлы EFI загрузчика на указанный раздел;
 /с – перезатрет имеющиеся загрузочные записи при создании нового хранилища;
 /v – включение режима вывода подробной информации BCDBoot.
```

Также могут помочь при восстановлении следующие команды:
```bash
bootrec /fixboot
bootrec /scanos
bootrec /rebuildbcd
bootrec /FixMbr (восстановление MBR записи, не для GPT диска)
```